<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="momo"><meta name="copyright" content="momo"><meta name="generator" content="Hexo 5.2.0"><meta name="theme" content="hexo-theme-yun"><title>Azkaban | 我的笔记</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"ppxiaodi.github.io","root":"/","title":"momo的小站","version":"1.7.0","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><meta name="description" content="尚硅谷大数据技术之Azkaban 官网：www.atguigu.com 二 Azkaban安装部署 ¶2.1 安装前准备   将Azkaban Web服务器、Azkaban执行服务器、Azkaban的sql执行脚本及MySQL安装包拷贝到hadoop102虚拟机&#x2F;opt&#x2F;software目录下 a.  azkaban-web-server-2.5.0.tar.gz b.  azkaban-exec">
<meta property="og:type" content="article">
<meta property="og:title" content="Azkaban">
<meta property="og:url" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/index.html">
<meta property="og:site_name" content="我的笔记">
<meta property="og:description" content="尚硅谷大数据技术之Azkaban 官网：www.atguigu.com 二 Azkaban安装部署 ¶2.1 安装前准备   将Azkaban Web服务器、Azkaban执行服务器、Azkaban的sql执行脚本及MySQL安装包拷贝到hadoop102虚拟机&#x2F;opt&#x2F;software目录下 a.  azkaban-web-server-2.5.0.tar.gz b.  azkaban-exec">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230006005.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230044733.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230057856.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230106811.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230116914.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230126979.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230136506.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230146736.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230233503.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230244194.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230252689.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230518074.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230613351.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230627679.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230711417.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230720675.png">
<meta property="og:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230815842.png">
<meta property="article:published_time" content="2021-03-06T16:00:00.000Z">
<meta property="article:modified_time" content="2021-07-11T08:54:53.408Z">
<meta property="article:author" content="momo">
<meta property="article:tag" content="大数据">
<meta property="article:tag" content="电商数仓">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230006005.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="momo"><img width="96" loading="lazy" src="/yun.png" alt="momo"></a><div class="site-author-name"><a href="/about/">momo</a></div><a class="site-name" href="/about/site.html">我的笔记</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">199</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">58</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">47</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://qm.qq.com/cgi-bin/qm/qr?k=kZJzggTTCf4SpvEQ8lXWoi5ZjhAx0ILZ&amp;jump_from=webapi" title="QQ 群 1050458482" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/YunYouJun" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/jizhideyunyoujun" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/yunyoujun/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=247102977" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/yunyoujun/" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/1579790" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/about/white-qrcode-and-search.jpg" title="微信公众号" target="_blank" style="color:#1AAD19"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-2-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/YunYouJun" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/elpsycn" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">二 Azkaban安装部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87"><span class="toc-number">1.1.</span> <span class="toc-text">2.1 安装前准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%AE%89%E8%A3%85Azkaban"><span class="toc-number">1.2.</span> <span class="toc-text">2.2 安装Azkaban</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">2.3 生成密钥库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.</span> <span class="toc-text">2.4 时间同步配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">2.5 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">2.5.1 Web服务器配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E6%89%A7%E8%A1%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.5.2 执行服务器配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E5%90%AF%E5%8A%A8executor%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.6.</span> <span class="toc-text">2.6 启动executor服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%90%AF%E5%8A%A8web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.7.</span> <span class="toc-text">2.7 启动web服务器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">三 Azkaban实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E5%8D%95%E4%B8%80job%E6%A1%88%E4%BE%8B"><span class="toc-number">2.1.</span> <span class="toc-text">3.1单一job案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E5%A4%9Ajob%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%A1%88%E4%BE%8B"><span class="toc-number">2.2.</span> <span class="toc-text">3.2多job工作流案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-java%E6%93%8D%E4%BD%9C%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.3.</span> <span class="toc-text">3.3 java操作任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-HDFS%E6%93%8D%E4%BD%9C%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.4.</span> <span class="toc-text">3.3 HDFS操作任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-MapReduce%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.5.</span> <span class="toc-text">3.4 MapReduce任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-Hive%E8%84%9A%E6%9C%AC%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.6.</span> <span class="toc-text">3.5 Hive脚本任务</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="momo"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="我的笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Azkaban</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2021-03-07 00:00:00" itemprop="dateCreated datePublished" datetime="2021-03-07T00:00:00+08:00">2021-03-07</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-07-11 16:54:53" itemprop="dateModified" datetime="2021-07-11T16:54:53+08:00">2021-07-11</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">大数据</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%94%B5%E5%95%86%E6%95%B0%E4%BB%93/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">电商数仓</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">大数据</span></a><a class="tag-item" href="/tags/%E7%94%B5%E5%95%86%E6%95%B0%E4%BB%93/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">电商数仓</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p>尚硅谷大数据技术之Azkaban</p>
<p>官网：<a target="_blank" rel="noopener" href="http://www.atguigu.com">www.atguigu.com</a></p>
<h1>二 Azkaban安装部署</h1>
<h2 id="2-1-安装前准备"><a class="header-anchor" href="#2-1-安装前准备">¶</a>2.1 安装前准备</h2>
<ol>
<li>
<p>将Azkaban<br>
Web服务器、Azkaban执行服务器、Azkaban的sql执行脚本及MySQL安装包拷贝到hadoop102虚拟机/opt/software目录下</p>
<p>a.  azkaban-web-server-2.5.0.tar.gz</p>
<p>b.  azkaban-executor-server-2.5.0.tar.gz</p>
<p>c.  azkaban-sql-script-2.5.0.tar.gz</p>
<p>d.  mysql-libs.zip</p>
</li>
<li>
<p>选择<strong>Mysql</strong>作为Azkaban数据库，因为Azkaban建立了一些Mysql连接增强功能，以方便Azkaban设置，并增强服务可靠性。<strong>（参见hive文档2.4）</strong></p>
</li>
</ol>
<h2 id="2-2-安装Azkaban"><a class="header-anchor" href="#2-2-安装Azkaban">¶</a>2.2 安装Azkaban</h2>
<ol>
<li>在/opt/module/目录下创建azkaban目录</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 module]$ mkdir azkaban<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol start="2">
<li>解压azkaban-web-server-2.5.0.tar.gz、azkaban-executor-server-2.5.0.tar.gz、azkaban-sql-script-2.5.0.tar.gz到/opt/module/azkaban目录下</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 software]$ tar -zxvf azkaban-web-server-2.5.0.tar.gz -C &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;
[atguigu@hadoop102 software]$ tar -zxvf azkaban-executor-server-2.5.0.tar.gz -C &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;
[atguigu@hadoop102 software]$ tar -zxvf azkaban-sql-script-2.5.0.tar.gz -C &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ol start="3">
<li>对解压后的文件重新命名</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ mv azkaban-web-2.5.0&#x2F; server
[atguigu@hadoop102 azkaban]$ mv azkaban-executor-2.5.0&#x2F; executor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ol start="4">
<li>azkaban脚本导入</li>
</ol>
<p>进入mysql，创建azkaban数据库，并将解压的脚本导入到azkaban数据库。</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ mysql -uroot -p000000
mysql&gt; create database azkaban;
mysql&gt; use azkaban;
mysql&gt; source &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;azkaban-2.5.0&#x2F;create-all-sql-2.5.0.sql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注：source后跟.sql文件，用于批量处理.sql文件中的sql语句。</p>
</blockquote>
<h2 id="2-3-生成密钥库"><a class="header-anchor" href="#2-3-生成密钥库">¶</a>2.3 生成密钥库</h2>
<p>Keytool：是java数据证书的管理工具，使用户能够管理自己的公/私钥对及相关证书。</p>
<p>-keystore：指定密钥库的名称及位置（产生的各类信息将不在.keystore文件中）</p>
<p>-genkey：在用户主目录中创建一个默认文件&quot;.keystore&quot;</p>
<p>-alias：对我们生成的.keystore进行指认别名；如果没有默认是mykey</p>
<p>-keyalg：指定密钥的算法 RSA/DSA 默认是DSA</p>
<p>1）生成 keystore的密码及相应信息的密钥库</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ keytool -keystore keystore -alias jetty -genkey -keyalg RSA
输入密钥库口令:  
再次输入新口令: 
您的名字与姓氏是什么?
  [Unknown]:  
您的组织单位名称是什么?
  [Unknown]:  
您的组织名称是什么?
  [Unknown]:  
您所在的城市或区域名称是什么?
  [Unknown]:  
您所在的省&#x2F;市&#x2F;自治区名称是什么?
  [Unknown]:  
该单位的双字母国家&#x2F;地区代码是什么?
  [Unknown]:  
CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown是否正确?
  [否]:  y

输入 &lt;jetty&gt; 的密钥口令
        (如果和密钥库口令相同, 按回车):  
再次输入新口令:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：</p>
<p>密钥库的密码至少必须6个字符，可以是纯数字或者字母或者数字和字母的组合等等</p>
<p>密钥库的密码最好和&lt;jetty&gt; 的密钥相同，方便记忆</p>
<p>2）将keystore 拷贝到 azkaban web服务器根目录中</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ mv keystore &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="2-4-时间同步配置"><a class="header-anchor" href="#2-4-时间同步配置">¶</a>2.4 时间同步配置</h2>
<p>先配置好服务器节点上的时区</p>
<ol>
<li>如果在/usr/share/zoneinfo/这个目录下不存在时区配置文件Asia/Shanghai，就要用<br>
tzselect 生成。</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ tzselect
Please identify a location so that time zone rules can be set correctly.
Please select a continent or ocean.
 1) Africa
 2) Americas
 3) Antarctica
 4) Arctic Ocean
 5) Asia
 6) Atlantic Ocean
 7) Australia
 8) Europe
 9) Indian Ocean
10) Pacific Ocean
11) none - I want to specify the time zone using the Posix TZ format.
#? 5
Please select a country.
 1) Afghanistan           18) Israel                35) Palestine
 2) Armenia               19) Japan                 36) Philippines
 3) Azerbaijan            20) Jordan                37) Qatar
 4) Bahrain               21) Kazakhstan            38) Russia
 5) Bangladesh            22) Korea (North)         39) Saudi Arabia
 6) Bhutan                23) Korea (South)         40) Singapore
 7) Brunei                24) Kuwait                41) Sri Lanka
 8) Cambodia              25) Kyrgyzstan            42) Syria
 9) China                 26) Laos                  43) Taiwan
10) Cyprus                27) Lebanon               44) Tajikistan
11) East Timor            28) Macau                 45) Thailand
12) Georgia               29) Malaysia              46) Turkmenistan
13) Hong Kong             30) Mongolia              47) United Arab Emirates
14) India                 31) Myanmar (Burma)       48) Uzbekistan
15) Indonesia             32) Nepal                 49) Vietnam
16) Iran                  33) Oman                  50) Yemen
17) Iraq                  34) Pakistan
#? 9
Please select one of the following time zone regions.
1) Beijing Time
2) Xinjiang Time
#? 1

The following information has been given:

        China
        Beijing Time

Therefore TZ&#x3D;&#39;Asia&#x2F;Shanghai&#39; will be used.
Local time is now:      Thu Oct 18 16:24:23 CST 2018.
Universal Time is now:  Thu Oct 18 08:24:23 UTC 2018.
Is the above information OK?
1) Yes
2) No
#? 1

You can make this change permanent for yourself by appending the line
        TZ&#x3D;&#39;Asia&#x2F;Shanghai&#39;; export TZ
to the file &#39;.profile&#39; in your home directory; then log out and log in again.

Here is that TZ value again, this time on standard output so that you
can use the &#x2F;usr&#x2F;bin&#x2F;tzselect command in shell scripts:
Asia&#x2F;Shanghai<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2）拷贝该时区文件，覆盖系统本地时区配置</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ cp &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai &#x2F;etc&#x2F;localtime <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3）集群时间同步（同时发给三个窗口）</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ sudo date -s &#39;2018-10-18 16:39:30&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="2-5-配置文件"><a class="header-anchor" href="#2-5-配置文件">¶</a>2.5 配置文件</h2>
<h3 id="2-5-1-Web服务器配置"><a class="header-anchor" href="#2-5-1-Web服务器配置">¶</a>2.5.1 Web服务器配置</h3>
<p>1）进入azkaban web服务器安装目录 conf目录，打开azkaban.properties文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 conf]$ pwd
&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;conf
[atguigu@hadoop102 conf]$ vim azkaban.properties<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>2）按照如下配置修改azkaban.properties文件。</p>
<pre class="line-numbers language-none"><code class="language-none">#Azkaban Personalization Settings
#服务器UI名称,用于服务器上方显示的名字
azkaban.name&#x3D;Test
#描述
azkaban.label&#x3D;My Local Azkaban
#UI颜色
azkaban.color&#x3D;#FF3601
azkaban.default.servlet.path&#x3D;&#x2F;index
#默认web server存放web文件的目录
web.resource.dir&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;web&#x2F;
#默认时区,已改为亚洲&#x2F;上海 默认为美国
default.timezone.id&#x3D;Asia&#x2F;Shanghai

#Azkaban UserManager class
user.manager.class&#x3D;azkaban.user.XmlUserManager
#用户权限管理默认类（绝对路径）
user.manager.xml.file&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;conf&#x2F;azkaban-users.xml

#Loader for projects
#global配置文件所在位置（绝对路径）
executor.global.properties&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;executor&#x2F;conf&#x2F;global.properties
azkaban.project.dir&#x3D;projects

#数据库类型
database.type&#x3D;mysql
#端口号
mysql.port&#x3D;3306
#数据库连接IP
mysql.host&#x3D;hadoop102
#数据库实例名
mysql.database&#x3D;azkaban
#数据库用户名
mysql.user&#x3D;root
#数据库密码
mysql.password&#x3D;000000
#最大连接数
mysql.numconnections&#x3D;100

# Velocity dev mode
velocity.dev.mode&#x3D;false

# Azkaban Jetty server properties.
# Jetty服务器属性.
#最大线程数
jetty.maxThreads&#x3D;25
#Jetty SSL端口
jetty.ssl.port&#x3D;8443
#Jetty端口
jetty.port&#x3D;8081
#SSL文件名（绝对路径）
jetty.keystore&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;keystore
#SSL文件密码
jetty.password&#x3D;000000
#Jetty主密码与keystore文件相同
jetty.keypassword&#x3D;000000
#SSL文件名（绝对路径）
jetty.truststore&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server&#x2F;keystore
#SSL文件密码
jetty.trustpassword&#x3D;000000

# Azkaban Executor settings
executor.port&#x3D;12321

# mail settings
mail.sender&#x3D;
mail.host&#x3D;
job.failure.email&#x3D;
job.success.email&#x3D;

lockdown.create.projects&#x3D;false

cache.directory&#x3D;cache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3）web服务器用户配置</p>
<p>在azkaban<br>
web服务器安装目录 conf目录，按照如下配置修改azkaban-users.xml 文件，增加管理员用户。</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 conf]$ vim azkaban-users.xml
&lt;azkaban-users&gt;
	&lt;user username&#x3D;&quot;azkaban&quot; password&#x3D;&quot;azkaban&quot; roles&#x3D;&quot;admin&quot; groups&#x3D;&quot;azkaban&quot; &#x2F;&gt;
	&lt;user username&#x3D;&quot;metrics&quot; password&#x3D;&quot;metrics&quot; roles&#x3D;&quot;metrics&quot;&#x2F;&gt;
	&lt;user username&#x3D;&quot;admin&quot; password&#x3D;&quot;admin&quot; roles&#x3D;&quot;admin&quot; &#x2F;&gt;
	&lt;role name&#x3D;&quot;admin&quot; permissions&#x3D;&quot;ADMIN&quot; &#x2F;&gt;
	&lt;role name&#x3D;&quot;metrics&quot; permissions&#x3D;&quot;METRICS&quot;&#x2F;&gt;
&lt;&#x2F;azkaban-users&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-2-执行服务器配置"><a class="header-anchor" href="#2-5-2-执行服务器配置">¶</a>2.5.2 执行服务器配置</h3>
<p>1）进入执行服务器安装目录conf，打开azkaban.properties</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 conf]$ pwd
&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;executor&#x2F;conf
[atguigu@hadoop102 conf]$ vim azkaban.properties<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ol start="2">
<li>按照如下配置修改azkaban.properties文件。</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">#Azkaban
#时区
default.timezone.id&#x3D;Asia&#x2F;Shanghai

# Azkaban JobTypes Plugins
#jobtype 插件所在位置
azkaban.jobtype.plugin.dir&#x3D;plugins&#x2F;jobtypes

#Loader for projects
executor.global.properties&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;executor&#x2F;conf&#x2F;global.properties
azkaban.project.dir&#x3D;projects

database.type&#x3D;mysql
mysql.port&#x3D;3306
mysql.host&#x3D;hadoop102
mysql.database&#x3D;azkaban
mysql.user&#x3D;root
mysql.password&#x3D;000000
mysql.numconnections&#x3D;100

# Azkaban Executor settings
#最大线程数
executor.maxThreads&#x3D;50
#端口号(如修改,请与web服务中一致)
executor.port&#x3D;12321
#线程数
executor.flow.threads&#x3D;30<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-6-启动executor服务器"><a class="header-anchor" href="#2-6-启动executor服务器">¶</a>2.6 启动executor服务器</h2>
<p>在executor服务器目录下执行启动命令</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 executor]$ pwd
&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;executor
[atguigu@hadoop102 executor]$ bin&#x2F;azkaban-executor-start.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="2-7-启动web服务器"><a class="header-anchor" href="#2-7-启动web服务器">¶</a>2.7 启动web服务器</h2>
<p>在azkaban web服务器目录下执行启动命令</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 server]$ pwd
&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;server
[atguigu@hadoop102 server]$ bin&#x2F;azkaban-web-start.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>注意：</p>
<p>先执行executor，再执行web，避免Web Server会因为找不到执行器启动失败。</p>
<p>jps查看进程</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 server]$ jps
3601 AzkabanExecutorServer
5880 Jps
3661 AzkabanWebServer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>启动完成后，在浏览器(建议使用谷歌浏览器)中输入<strong><a target="_blank" rel="noopener" href="https://xn--IP-fr5c86lw2a0cw16k:8443">https://服务器IP地址:8443</a></strong>，即可访问azkaban服务了。</p>
<p>在登录中输入刚才在azkaban-users.xml文件中新添加的户用名及密码，点击 login。</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230006005.png" class="" title="image-20210307230006005" loading="lazy">
<h1>三 Azkaban实战</h1>
<p>Azkaba内置的任务类型支持command、java</p>
<h2 id="3-1单一job案例"><a class="header-anchor" href="#3-1单一job案例">¶</a>3.1单一job案例</h2>
<p>1）创建job描述文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim first.job
#first.job
type&#x3D;command
command&#x3D;echo &#39;this is my first job&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>2) 将job资源文件打包成zip文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip first.zip first.job 
  adding: first.job (deflated 15%)
[atguigu@hadoop102 jobs]$ ll
总用量 8
-rw-rw-r--. 1 atguigu atguigu  60 10月 18 17:42 first.job
-rw-rw-r--. 1 atguigu atguigu 219 10月 18 17:43 first.zip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：</p>
<p>目前，Azkaban上传的工作流文件只支持xxx.zip文件。zip应包含xxx.job运行作业所需的文件和任何文件（文件名后缀必须以.job结尾，否则无法识别）。作业名称在项目中必须是唯一的。</p>
<p>3）通过azkaban的web管理平台创建project并上传job的zip包</p>
<p>首先创建project</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230044733.png" class="" title="image-20210307230044733" loading="lazy">1
<p>上传zip包</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230057856.png" class="" title="image-20210307230057856" loading="lazy">
<p>4）启动执行该job</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230106811.png" class="" title="image-20210307230106811" loading="lazy">
<p>点击执行工作流</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230116914.png" class="" title="image-20210307230116914" loading="lazy">
<p>点击继续</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230126979.png" class="" title="image-20210307230126979" loading="lazy">
<p>5）Job执行成功</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230136506.png" class="" title="image-20210307230136506" loading="lazy">
<p>6）点击查看job日志</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230146736.png" class="" title="image-20210307230146736" loading="lazy">
<h2 id="3-2多job工作流案例"><a class="header-anchor" href="#3-2多job工作流案例">¶</a>3.2多job工作流案例</h2>
<p>1）创建有依赖关系的多个job描述</p>
<p>第一个job：start.job</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim start.job
#start.job
type&#x3D;command
command&#x3D;touch &#x2F;opt&#x2F;module&#x2F;kangkang.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二个job：step1.job依赖start.job</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim step1.job
#step1.job
type&#x3D;command
dependencies&#x3D;start
command&#x3D;echo &quot;this is step1 job&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第三个job：step2.job依赖start.job</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim step2.job
#step2.job
type&#x3D;command
dependencies&#x3D;start
command&#x3D;echo &quot;this is step2 job&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第四个job：finish.job依赖step1.job和step2.job</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim finish.job
#finish.job
type&#x3D;command
dependencies&#x3D;step1,step2
command&#x3D;echo &quot;this is finish job&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2）将所有job资源文件打到一个zip包中</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip jobs.zip start.job step1.job step2.job finish.job
updating: start.job (deflated 16%)
  adding: step1.job (deflated 12%)
  adding: step2.job (deflated 12%)
  adding: finish.job (deflated 14%) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3）在azkaban的web管理界面创建工程并上传zip包</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230233503.png" class="" title="image-20210307230233503" loading="lazy">
<p>5）启动工作流flow</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230244194.png" class="" title="image-20210307230244194" loading="lazy">
<p>6）查看结果</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230252689.png" class="" title="image-20210307230252689" loading="lazy">
<p>思考：</p>
<p>将student.txt文件上传到hdfs，根据所传文件创建外部表，再将表中查询到的结果写入到本地文件</p>
<h2 id="3-3-java操作任务"><a class="header-anchor" href="#3-3-java操作任务">¶</a>3.3 java操作任务</h2>
<p>使用Azkaban调度java程序</p>
<p>1）编写java程序</p>
<pre class="line-numbers language-none"><code class="language-none">import java.io.IOException;

public class AzkabanTest &#123;
	public void run() throws IOException &#123;
        &#x2F;&#x2F; 根据需求编写具体代码
		FileOutputStream fos &#x3D; new FileOutputStream(&quot;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;output.txt&quot;);
		fos.write(&quot;this is a java progress&quot;.getBytes());
		fos.close();
    &#125;

	public static void main(String[] args) throws IOException &#123;
		AzkabanTest azkabanTest &#x3D; new AzkabanTest();
		azkabanTest.run();
	&#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2）将java程序打成jar包，创建lib目录，将jar放入lib内</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ mkdir lib
[atguigu@hadoop102 azkaban]$ cd lib&#x2F;
[atguigu@hadoop102 lib]$ ll
总用量 4
-rw-rw-r--. 1 atguigu atguigu 3355 10月 18 20:55 azkaban-0.0.1-SNAPSHOT.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3）编写job文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim azkabanJava.job
#azkabanJava.job
type&#x3D;javaprocess
java.class&#x3D;com.atguigu.azkaban.AzkabanTest
classpath&#x3D;&#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;lib&#x2F;*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>4）将job文件打成zip包</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip azkabanJava.zip azkabanJava.job 
  adding: azkabanJava.job (deflated 19%)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>5）通过azkaban的web管理平台创建project并上传job压缩包，启动执行该job</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230518074.png" class="" title="image-20210307230518074" loading="lazy">
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 azkaban]$ pwd
&#x2F;opt&#x2F;module&#x2F;azkaban
[atguigu@hadoop102 azkaban]$ ll
总用量 24
drwxrwxr-x.  2 atguigu atguigu 4096 10月 17 17:14 azkaban-2.5.0
drwxrwxr-x. 10 atguigu atguigu 4096 10月 18 17:17 executor
drwxrwxr-x.  2 atguigu atguigu 4096 10月 18 20:35 jobs
drwxrwxr-x.  2 atguigu atguigu 4096 10月 18 20:54 lib
-rw-rw-r--.  1 atguigu atguigu   23 10月 18 20:55 output
drwxrwxr-x.  9 atguigu atguigu 4096 10月 18 17:17 server
[atguigu@hadoop102 azkaban]$ cat output 
this is a java progress<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-3-HDFS操作任务"><a class="header-anchor" href="#3-3-HDFS操作任务">¶</a>3.3 HDFS操作任务</h2>
<p>1）创建job描述文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim fs.job
#hdfs job
type&#x3D;command
command&#x3D;&#x2F;opt&#x2F;module&#x2F;hadoop-2.7.2&#x2F;bin&#x2F;hadoop fs -mkdir &#x2F;azkaban<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>2）将job资源文件打包成zip文件</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip fs.zip fs.job 
  adding: fs.job (deflated 12%)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>3）通过azkaban的web管理平台创建project并上传job压缩包</p>
<p>4）启动执行该job</p>
<p>5）查看结果</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230613351.png" class="" title="image-20210307230613351" loading="lazy">
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230627679.png" class="" title="image-20210307230627679" loading="lazy">
<h2 id="3-4-MapReduce任务"><a class="header-anchor" href="#3-4-MapReduce任务">¶</a>3.4 MapReduce任务</h2>
<p>mapreduce任务依然可以使用azkaban进行调度</p>
<ol>
<li>创建job描述文件，及mr程序jar包</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim mapreduce.job
#mapreduce job
type&#x3D;command
command&#x3D;&#x2F;opt&#x2F;module&#x2F;hadoop-2.7.2&#x2F;bin&#x2F;hadoop jar &#x2F;opt&#x2F;module&#x2F;hadoop-2.7.2&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples-2.7.2.jar wordcount &#x2F;wordcount&#x2F;input &#x2F;wordcount&#x2F;output<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="2">
<li>将所有job资源文件打到一个zip包中</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip mapreduce.zip mapreduce.job 
  adding: mapreduce.job (deflated 43%)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>3）在azkaban的web管理界面创建工程并上传zip包</p>
<p>4）启动job</p>
<p>5）查看结果</p>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230711417.png" class="" title="image-20210307230711417" loading="lazy">
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230720675.png" class="" title="image-20210307230720675" loading="lazy">
<h2 id="3-5-Hive脚本任务"><a class="header-anchor" href="#3-5-Hive脚本任务">¶</a>3.5 Hive脚本任务</h2>
<p>1）创建job描述文件和hive脚本</p>
<p>（1）Hive脚本：student.sql</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim student.sql
use default;
drop table student;
create table student(id int, name string)
row format delimited fields terminated by &#39;\t&#39;;
load data local inpath &#39;&#x2F;opt&#x2F;module&#x2F;datas&#x2F;student.txt&#39; into table student;
insert overwrite local directory &#39;&#x2F;opt&#x2F;module&#x2F;datas&#x2F;student&#39;
row format delimited fields terminated by &#39;\t&#39;
select * from student;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（2）Job描述文件：hive.job</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ vim hive.job
#hive job
type&#x3D;command
command&#x3D;&#x2F;opt&#x2F;module&#x2F;hive&#x2F;bin&#x2F;hive -f &#x2F;opt&#x2F;module&#x2F;azkaban&#x2F;jobs&#x2F;student.sql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="2">
<li>将所有job资源文件打到一个zip包中</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 jobs]$ zip hive.zip hive.job 
  adding: hive.job (deflated 21%)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>3）在azkaban的web管理界面创建工程并上传zip包</p>
<p>4）启动job</p>
<p>5）查看结果</p>
<pre class="line-numbers language-none"><code class="language-none">[atguigu@hadoop102 student]$ cat &#x2F;opt&#x2F;module&#x2F;datas&#x2F;student&#x2F;000000_0 
1001    yangyang
1002    bobo
1003    banzhang
1004    pengpeng<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/image-20210307230815842.png" class="" title="image-20210307230815842" loading="lazy">
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/alipay-qrcode.jpg"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/alipay-qrcode.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/qqpay-qrcode.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/qqpay-qrcode.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/wechatpay-qrcode.jpg"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/donate/wechatpay-qrcode.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>momo</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/" title="Azkaban">https://ppxiaodi.github.io/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Azkaban/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/03/10/CollectionNote/java/%E9%9D%A2%E8%AF%95%E9%A2%98/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="prev" title="Java基础知识面试题"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Java基础知识面试题</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/03/07/CollectionNote/big/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/Flume/" rel="next" title="Flume"><span class="post-nav-text">Flume</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> momo</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.7.0</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div></div></body></html>